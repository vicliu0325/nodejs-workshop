<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>XHR</title>
</head>

<body>
    <button id="asyncBtn">jquery</button>
    <button id="countBtn">測試按鈕</button>
    <div id="count">0</div>
    <div id="response">message</div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script>
        // test url: http://54.71.133.152:3000/
        // test url for 500: http://54.71.133.152:3000/error
        let date = new Date();

        var responseDom = document.getElementById('response');

        var asyncBtn = document.getElementById('asyncBtn');

        asyncBtn.addEventListener('click', async function () {
            responseDom.innerText = '開始「非」同步請求';
            // 實作非同步請求
            // 'http://54.71.133.152:3000'
            $.ajax('http://54.71.133.152:3000', { method: 'GET' })
                .done((data) => {
                    responseDom.innerHTML = `jQuery ${data}`;
                })
                .fail((xhr, status) => {
                    responseDom.innerHTML = `jquery ajax 失敗: ${status}`;
                });
        });

        var count = document.getElementById('count');
        var countBtn = document.getElementById('countBtn');
        countBtn.addEventListener('click', function () {
            count.innerText = parseInt(count.innerText, 10) + 1;
        });
    </script>
</body>

</html>